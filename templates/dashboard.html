<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="dashboard.css">
    <title>Dashboard</title>
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
    }
    
    a {
        text-decoration: none;
        color: #f1f3f2;
        font-size: 14px;
    }
    
    canvas {
        width: 100% !important;
    }
    
    img {
        object-fit: cover;
    }
    
    body {
        background: #f1f3f2;
    }
    
    .top-container {
        background: linear-gradient(to right, #a640b4,#da2958);
        border-radius: 0 0 30px 30px;
        padding-bottom: 10px;
    }
    
    .top-container .nav {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 20px 20px 14px;
        border-bottom: 2px solid #1e293b;
    }
    
    .top-container .nav .logo {
        display: flex;
        align-items: center;
        gap: 6px;
    }
    
    .top-container .nav .logo i {
        color: #f1f3f2;
        font-size: 24px;
    }
    
    .top-container .nav .logo a {
        font-size: 16px;
    }
    
    .top-container .nav .nav-links {
        display: flex;
        gap: 20px;
    }
    
    .top-container .nav .nav-links a {
        color: #ccc;
        transition: all 0.3s ease;
    }
    
    .top-container .nav .nav-links a:hover {
        color: #fff;
    }
    
    .top-container .nav .right-section {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .top-container .nav .right-section>i {
        color: #f1f3f2;
        background: #1e293b;
        padding: 12px;
        border-radius: 50%;
        cursor: pointer;
    }
    
    .top-container .nav .right-section .profile {
        display: flex;
        align-items: center;
        background: #1e293b;
        padding: 0 10px;
        border-radius: 50px;
        gap: 10px;
    }
    
    .top-container .nav .right-section .profile .info {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .top-container .nav .right-section .profile .info img {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        border: 1px solid #f1f3f2;
    }
    
    .top-container .nav .right-section .profile .info a {
        font-size: 13px;
    }
    
    .top-container .nav .right-section .profile .info p {
        font-size: 13px;
        color: #ccc;
    }
    
    .top-container .nav .right-section .profile>i {
        color: #f1f3f2;
        font-size: 22px;
        cursor: pointer;
    }
    
    .top-container .status {
        padding: 20px 60px 10px;
    }
    
    .top-container .status .header {
        display: flex;
        align-items: center;
        width: 100%;
        margin-bottom: 20px;
    }
    
    .top-container .status .header h4 {
        color: #f1f3f2;
        font-weight: 500;
    }
    
    .top-container .status .header h4#big {
        flex: 3;
        padding-left: 400px;
        font-size: 20px;
    }
    
    .top-container .status .header h4#small {
        flex: 1;
        padding-left: 40px;
    }
    
    .top-container .status .items-list {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        gap: 14px;
    }
    
    .top-container .status .items-list .item {
        background: #e0f2fe;
        width: 25%;
        padding: 20px;
        border-radius: 18px;
    }
    
    .top-container .status .items-list .item:nth-child(2) {
        background: #fffbeb;
    }
    
    .top-container .status .items-list .item:nth-child(3) {
        background: #bfdbfe;
    }
    
    .top-container .status .items-list .item:nth-child(4) {
        background: #031224;
        padding: 10px;
    }
    
    .top-container .status .items-list .item .info {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        margin-bottom: 40px;
    }
    
    .top-container .status .items-list .item .info h5 {
        font-size: 16px;
        font-weight: 600;
        margin-bottom: 10px;
    }
    
    .top-container .status .items-list .item .info p {
        font-size: 12px;
        font-weight: 500;
    }
    
    .top-container .status .items-list .item .info>i {
        font-size: 20px;
        padding: 10px;
        background: #031224;
        color: #f1f3f2;
        border-radius: 50%;
    }
    
    .top-container .status .items-list .item .progress {
        position: relative;
        height: 10px;
        background: #b7c0cd;
        border-radius: 10px;
    }
    
    .top-container .status .items-list .item .progress .bar {
        width: 92%;
        height: 10px;
        background: #031224;
        border-radius: 10px;
    }
    
    .top-container .status .items-list .item .progress::before {
        content: "92%";
        position: absolute;
        top: -40px;
        right: 0;
        font-size: 22px;
        font-weight: 600;
    }
    
    .top-container .status .items-list .item:nth-child(2) .progress {
        background: #d6d3d1;
    }
    
    .top-container .status .items-list .item:nth-child(2) .progress .bar {
        width: 65%;
    }
    
    .top-container .status .items-list .item:nth-child(2) .progress::before {
        content: "";
    }
    
    
    .top-container .status .items-list .item:nth-child(3) .progress {
        background: #94a3b8;
    }
    
    .top-container .status .items-list .item:nth-child(3) .progress .bar {
        width: 80%;
    }
    
    .top-container .status .items-list .item:nth-child(3) .progress::before {
        content: "";
    }
    
    .bottom-container {
        display: flex;
        gap: 20px;
        padding: 30px;
    }
    
    .bottom-container .prog-status,
    .bottom-container .popular,
    .bottom-container .upcoming {
        background: #fefefe;
        padding: 20px;
        border-radius: 24px;
    }
    
    .bottom-container .prog-status {
        width: 50%;
    }
    
    .bottom-container .prog-status .header,
    .bottom-container .popular .header,
    .bottom-container .upcoming .header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
    }
    
    .bottom-container .prog-status .header h4,
    .bottom-container .popular .header h4,
    .bottom-container .upcoming .header h4 {
        font-weight: 600;
    }
    
    .bottom-container .prog-status .header .tabs {
        background: #f3f3f3;
        padding: 4px;
        border-radius: 20px;
        display: flex;
        gap: 5px;
    }
    
    .bottom-container .prog-status .header .tabs a {
        padding: 4px 20px;
        font-size: 12px;
        color: #000;
        border-radius: 20px;
        font-weight: 600;
    }
    
    .bottom-container .prog-status .header .tabs a.active {
        background: #fff;
    }
    
    .bottom-container .prog-status .details {
        display: flex;
        margin-bottom: 30px;
        gap: 20px;
    }
    
    .bottom-container .prog-status .details .item h2 {
        font-size: 30px;
        font-weight: 400;
    }
    
    .bottom-container .prog-status .details .item p {
        font-size: 13px;
        color: #9b9b9b;
    }
    
    .bottom-container .prog-status .details .separator {
        width: 2px;
        height: 70px;
        background: #f3f3f3;
    }
    
    .bottom-container .popular {
        width: 25%;
    }
    
    .bottom-container .popular .header,
    .bottom-container .upcoming .header {
        margin-bottom: 40px;
    }
    
    .bottom-container .popular .header a,
    .bottom-container .upcoming .header a {
        font-size: 12px;
        color: #000;
        font-weight: 600;
        padding: 4px 8px;
        background: #f3f3f3;
        border-radius: 20px;
    }
    
    .bottom-container .popular>img {
        width: 100%;
        aspect-ratio: 16/9;
        border-radius: 20px;
        margin-bottom: 20px;
    }
    
    .bottom-container .popular .audio {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
    }
    
    .bottom-container .popular .audio i {
        font-size: 26px;
        background: #eff6ff;
        padding: 6px;
        border-radius: 50%;
    }
    
    .bottom-container .popular .audio a {
        font-size: 15px;
        font-weight: 600;
        color: #000;
        line-height: 18px;
    }
    
    .bottom-container .popular>p {
        font-size: 14px;
        font-weight: 500;
        margin-bottom: 50px;
    }
    
    .bottom-container .popular .listen {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    
    .bottom-container .popular .listen .author {
        padding: 6px 10px;
        background: #f3f3f3;
        display: flex;
        align-items: center;
        gap: 10px;
        border-radius: 10px;
    }
    
    .bottom-container .popular .listen .author img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
    }
    
    .bottom-container .popular .listen .author a {
        font-size: 14px;
        color: #000;
    }
    
    .bottom-container .popular .listen .author p {
        font-size: 12px;
        color: #9b9b9b;
    }
    
    .bottom-container .popular .listen button {
        border: none;
        color: #fff;
        background: #031224;
        padding: 6px 14px;
        border-radius: 10px;
        display: flex;
        align-items: center;
        gap: 6px;
        cursor: pointer;
    }
    
    .bottom-container .popular .listen button i {
        font-size: 16px;
    }
    
    .bottom-container .upcoming {
        width: 25%;
    }
    
    .bottom-container .upcoming .dates {
        display: flex;
        justify-content: space-between;
        margin-bottom: 40px;
    }
    
    .bottom-container .upcoming .dates .item {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
    }
    
    .bottom-container .upcoming .dates .item h5 {
        font-weight: 600;
    }
    
    .bottom-container .upcoming .dates .item a {
        color: #000;
        font-size: 13px;
        padding: 5px 9px;
        border-radius: 50%;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    
    .bottom-container .upcoming .dates .item.active a,
    .bottom-container .upcoming .dates .item a:hover {
        color: #fff;
        background: #031224;
    }
    
    .bottom-container .upcoming .events {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }
    
    .bottom-container .upcoming .events .item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: #eff6ff;
        padding: 10px;
        border-radius: 10px;
    }
    
    .bottom-container .upcoming .events .item>i {
        cursor: pointer;
    }
    
    .bottom-container .upcoming .events .item>div {
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .bottom-container .upcoming .events .item>div i {
        font-size: 30px;
    }
    
    .bottom-container .upcoming .events .item .event-info a {
        font-size: 14px;
        color: #000;
        font-weight: 500;
    }
    
    .bottom-container .upcoming .events .item .event-info p {
        font-size: 13px;
        color: #9b9b9b;
    }
    
    .first-two {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 30px;
    }
    .filter{
        margin-left: 45px;
    }
    .new {
        width: 300px;
        height: 40px;
        margin: 10px;
        border-radius: 20px;
        font-size: large;
        align-content:center ;
    }
    
    @media screen and (max-width: 1300px) {
    
        .bottom-container .popular .audio a {
            margin-bottom: 20px;
            font-size: 12px;
        }
    
        .bottom-container .popular>p {
            margin-bottom: 20px;
            font-size: 12px;
        }
    
        .bottom-container .popular .listen {
            flex-direction: column;
            gap: 10px;
        }
    
        .bottom-container .popular .listen .author {
            width: 100%;
        }
    
        .bottom-container .popular .listen button {
            width: 100%;
            justify-content: center;
        }
    
        .bottom-container .upcoming .events .item {
            padding: 6px 10px;
        }
    
        .bottom-container .upcoming .events .item>div i {
            font-size: 20px;
        }
    
        .bottom-container .upcoming .events .item .event-info a {
            font-size: 13px;
        }
    
        .bottom-container .upcoming .events .item .event-info p {
            font-size: 12px;
        }
    
    }
    
    @media screen and (max-width: 1080px) {
    
        .top-container .nav .right-section .profile {
            padding: 5px;
        }
    
        .top-container .nav .right-section .profile .info p,
        .top-container .status .header h4#small {
            display: none;
        }
    
        .top-container .status .items-list {
            flex-wrap: wrap;
        }
    
        .top-container .status .items-list .item {
            width: 48%;
        }
    
        .bottom-container {
            flex-wrap: wrap;
        }
    
        .bottom-container .prog-status {
            width: 100%;
        }
    
        .bottom-container .popular,
        .bottom-container .upcoming {
            width: 48%;
        }
    
        .bottom-container .popular .audio a {
            font-size: 15px;
        }
    
        .bottom-container .popular>p {
            font-size: 14px;
            margin-bottom: 40px;
        }
    
        .bottom-container .popular .listen {
            flex-direction: row;
        }
    
        .bottom-container .popular .listen button {
            width: 50%;
        }
    
        .bottom-container .upcoming .events .item {
            padding: 10px;
        }
    
        .bottom-container .upcoming .events .item>div i {
            font-size: 30px;
        }
    
        .bottom-container .upcoming .events .item .event-info a {
            font-size: 14px;
        }
    
    }
    
    @media screen and (max-width: 768px) {
    
        .top-container .nav {
            flex-direction: column;
            gap: 15px;
        }
    
        .top-container .status .items-list .item .info h5 {
            font-size: 15px;
        }
    
        .bottom-container .popular,
        .bottom-container .upcoming {
            width: 100%;
        }
    
    }
    
    
    .financial-health-meter {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-top: 20px;
    }
    
    .gradient-column {
        position: relative;
        width: 50px;
        height: 200px;
        background: linear-gradient(to top, #ff0000, #00ff00);
        border-radius: 25px;
        display: flex;
        justify-content: center;
        align-items: flex-end;
        padding: 10px;
    }
    
    .gradient-column span#health-emoji {
        font-size: 24px;
        position: absolute;
        bottom: 10px;
        transition: transform 0.3s ease, color 0.3s ease;
    }

</style>

</head>

<body>

    <div class="top-container">

        <div class="nav">
            <div class="logo">
                

                <img style="height:40px;width:40px;border-radius:25px;" class="bi" src="{{url_for('static',filename='images/h.jpg')}}" alt="Image" class="img-fluid">
                <a href="#">Forge & Flow</a>
            </div>

            <div class="nav-links">
                
                <a href="index" >Homepage</a>

            </div>

            <div class="right-section">
                <div class="profile">
                </div>
            </div>

        </div>

        <div class="status">

            <div class="items-list">
                <div class="financial-health-meter">
                    <div class="gradient-column" style="position: relative; height: 250px; width: 50px; background: linear-gradient(to top, rgb(0, 255, 13), yellow, rgb(128, 0, 0));">
                        <span id="health-emoji" style="position: absolute; bottom: 0; left: 50%; transform: translateX(-50%);">üòä</span>
                    </div>
                </div>

                <div class="item">
                    <div class="info">
                        <div>
                            <h3>Expenses</h3>
                        </div>
                        <i class='bx bx-data'></i>
                    </div>
                    <div class="progress">
                        <div class="bar" id="expenseBar" style="width: 0; background-color: red; height: 10px;"></div>
                    </div>
                </div>
                <div class="item">
                    <div class="info">
                        <div>
                            <h3>Income</h3>
                        </div>
                        <i class='bx bx-terminal'></i>
                    </div>
                    <div class="progress">
                        <div class="bar" id="incomeBar" style="width: 0; background-color: green; height: 10px;"></div>
                    </div>
                </div>

            </div>

        </div>

    </div>

    <div class="bottom-container">

        <div class="prog-status">
            <div class="header">
                <h4>Income/Expenses</h4>
                <div class="tabs">

                </div>
            </div>

            <div class="details">

            </div>
            <div class="popular" style="width: 800px;">

                <div class="bill-entry">
                    <div class="first-two">
                        <select id="billDesc" onchange="toggleCustomDesc()" class="new">
                            <option value="">Select or Type Description</option>
                            <option value="Grocery">Grocery</option>
                            <option value="Rent">Rent</option>
                            <option value="Utilities">Utilities</option>
                            <option value="Salary">Salary</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Transportation">Transportation</option>
                            <option value="Other">Other</option>
                        </select>
                        <input type="text" id="customDesc" class="new" placeholder="Or write custom description" disabled />
                    </div>
                    <div class="first-two">
                        <input type="number" class="new" id="billAmount" placeholder="Amount" />
                        <input type="date" id="billDate" class="new" placeholder="Date" />
                    </div>
                    <div class="first-two">
                        <select id="billType" class="new">
                            <option value="expense">Expense</option>
                            <option value="income">Income</option>
                        </select>
                        <button onclick="addBill()" class="new">Add Bill</button>
                    </div>
                </div>
                <div class="filter first two">
                    <button onclick="showExpenses()" class="new">Show Expenses</button>
                    <button onclick="showIncome()" class="new" style="margin-left:37px;">Show Income</button>
                </div>

                <div id="billList" style="font-size: larger; display: flex; justify-content: center; align-items: center; font-weight: 500; flex-direction: column; gap: 10px; margin-top: 20px; width: 550px; background-color: rgb(41, 41, 104); color: aliceblue; margin-left: 40px; border-radius:10px ;">
                    <!-- List of entered bills will be shown here -->
                </div>
            </div>
        </div>
        <div class="prog-status">

            <div class="popular" style="width: 800px;">
                <div class="header">
                    <h4>Income and Expense Chart</h4>
                </div>
                <div class="item">
                    <canvas id="activity-chart"></canvas>
                </div>
            </div>

        </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        const allBills = [];
        let totalExpense = 0;
        let totalIncome = 0;

        function updateFinancialHealth() {
            const healthEmoji = document.getElementById("health-emoji");
            const gradientColumn = document.querySelector(".gradient-column");

            const totalBudget = totalIncome;
            const healthPercentage = totalBudget > 0 ? Math.max(0, Math.min(1, (totalBudget - totalExpense) / totalBudget)) : 0;

            if (healthPercentage > 0.7) {
                healthEmoji.textContent = "üòä";
                healthEmoji.style.color = "#00ff00";
            } else if (healthPercentage > 0.4) {
                healthEmoji.textContent = "üòê";
                healthEmoji.style.color = "#ffa500";
            } else {
                healthEmoji.textContent = "üò¢";
                healthEmoji.style.color = "#ff0000";
            }

            const offset = (1 - healthPercentage) * 200;
            healthEmoji.style.bottom = `${offset}px`;
        }

        const activityChart = new Chart(document.getElementById('activity-chart'), {
            type: 'bar',
            data: {
                labels: ['Expenses', 'Income'],
                datasets: [{
                    label: 'Amount',
                    data: [0, 0],
                    backgroundColor: ['#FF5733', '#33FF57']
                }]
            }
        });

        function updateData() {
            const total = totalExpense + totalIncome;
            const expensePercentage = total ? (totalExpense / total) * 100 : 0;
            const incomePercentage = total ? (totalIncome / total) * 100 : 0;

            document.getElementById('expenseBar').style.width = `${expensePercentage}%`;
            document.getElementById('incomeBar').style.width = `${incomePercentage}%`;

            activityChart.data.datasets[0].data = [totalExpense, totalIncome];
            activityChart.update();

            updateFinancialHealth();
        }

        function addBill() {
            let billDesc = document.getElementById('billDesc').value;
            const customDesc = document.getElementById('customDesc').value;
            const billAmount = parseFloat(document.getElementById('billAmount').value);
            const billDate = document.getElementById('billDate').value;
            const billType = document.getElementById('billType').value;

            if (!billDesc && !customDesc) {
                alert("Please select or write a description.");
                return;
            }

            billDesc = customDesc ? customDesc : billDesc;

            if (isNaN(billAmount) || billAmount <= 0) {
                alert("Please enter a valid amount.");
                return;
            }

            if (!billDate) {
                alert("Please enter a valid date.");
                return;
            }

            const billEntry = {
                description: billDesc,
                amount: billAmount,
                date: billDate,
                type: billType
            };

            allBills.push(billEntry);

            if (billType === 'expense') {
                totalExpense += billAmount;
            } else {
                totalIncome += billAmount;
            }

            displayBills();
            updateData();

            document.getElementById('billDesc').value = '';
            document.getElementById('customDesc').value = '';
            document.getElementById('billAmount').value = '';
            document.getElementById('billDate').value = '';
        }

        function displayBills() {
            const billList = document.getElementById('billList');
            billList.innerHTML = '';

            allBills.forEach(bill => {
                const billEntry = document.createElement('div');
                billEntry.classList.add('bill-entry-item');
                billEntry.innerHTML = `<p><strong>${bill.description}</strong>: ‚Çπ${bill.amount} - ${bill.type} on ${bill.date}</p>`;
                billList.appendChild(billEntry);
            });
        }

        function showExpenses() {
            const filteredBills = allBills.filter(bill => bill.type === 'expense');
            displayFilteredBills(filteredBills);
        }

        function showIncome() {
            const filteredBills = allBills.filter(bill => bill.type === 'income');
            displayFilteredBills(filteredBills);
        }

        function displayFilteredBills(filteredBills) {
            const billList = document.getElementById('billList');
            billList.innerHTML = '';

            filteredBills.forEach(bill => {
                const billEntry = document.createElement('div');
                billEntry.classList.add('bill-entry-item');
                billEntry.innerHTML = `<p><strong>${bill.description}</strong>: ‚Çπ${bill.amount} - ${bill.type} on ${bill.date}</p>`;
                billList.appendChild(billEntry);
            });
        }

        function toggleCustomDesc() {
            const customDescInput = document.getElementById('customDesc');
            if (document.getElementById('billDesc').value === 'Other') {
                customDescInput.disabled = false;
            } else {
                customDescInput.disabled = true;
            }
        }
    </script>
</body>

</html>
